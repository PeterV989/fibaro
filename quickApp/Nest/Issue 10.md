### Thermostat setpoints not updating properly when using °F. Problems updating the setpoints in auto mode update steps.

I finally took the time to update my version of this package on my Z-Box hub. In the process of troubleshooting I added to the header of **main.lua** to enable it to be run within VS Code using **fibemu** from @jangabrielson [https://github.com/jangabrielsson/fibemu.git](https://github.com/jangabrielsson/fibemu.git).

The first issue concerns the conversion of °F to °C during the setpoint updates. The call to `NestThermostat:setCoolingThermostatSetpoint()` and `NestThermostat:setCoolingThermostatSetpoint()` receive two arguments. The second argument is the temperature unit ('C' or 'F') of the value passed in the first argument. I added a parameter to retrieve this argument and used it to adjust the setpoint when the value is 'F'.

The second issue concerns the two step update to both setpoints when the thermostat is in _AUTO_ mode. The Nest Thermostat requires both setpoints to be set in _AUTO_ mode, but the updates are made in two steps. When the _HEAT_ setpoint is to be updated and the _HEAT_ setpoint is higher than the _COOL_ setpoint, the API throws an error. I fixed this by forcing the _COOL_ setpoint to be 1° higher than the _HEAT_ setpoint during this step. Likewise, when the _COOL_ setpoint is being updated and the _HEAT_ setpoint is higher than the _COOL_ setpoint, the _HEAT_ setpoint is forced 1° cooler than the _COOL_ setpoint. When the user has made the correct settings, everything will work out just fine. But the UI does not guard against this condition. When the user wants to be stupid, she/he will end up with the heating and cooling to be within 1° of each other regardless of what she/he has tried to do. The Google Nest app performs the same thing within the UI but I think the spread is a more reasonable 3° difference.

I created a fork of this repo, fixed the header of `main.lua`, and then created a branch **Fix-set-temperature-in-Auto-mode** to make my other corrections. I also took the liberty to proofread the **README.md** file and fix some minor typos and grammar (no offense).